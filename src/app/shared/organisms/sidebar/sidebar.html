<aside class="sidebar" [class.open]="isOpen" role="navigation" aria-label="Menú lateral">
  <div class="sidebar-overlay" (click)="closeSidebar()" [class.open]="isOpen"></div>

  <div class="sidebar-content">
    <!-- Top: Brand -->
    <div class="sidebar-brand">
      <div class="sidebar-brand-inner">
        <div class="sidebar-brand-icon" aria-hidden="true">
          <i class="fas fa-sync-alt"></i>
        </div>
        <span class="sidebar-brand-title">TurnFlow</span>
      </div>
      <button
        type="button"
        class="sidebar-close"
        (click)="closeSidebar()"
        aria-label="Cerrar menú">
        <i class="fas fa-times" aria-hidden="true"></i>
      </button>
    </div>

    <!-- Menu -->
    <nav class="sidebar-nav">
      @for (item of menuItems; track item.route) {
        <div class="sidebar-nav-item-wrapper" [class.active]="isActiveRoute(item.route)">
          <a
            [routerLink]="item.route"
            routerLinkActive="sidebar-link-active"
            [routerLinkActiveOptions]="{ exact: false }"
            class="sidebar-link"
            (click)="closeSidebar()"
            [attr.aria-label]="item.label">
            <i [class]="item.icon" aria-hidden="true"></i>
            <span class="sidebar-link-text">{{ item.label }}</span>
          </a>
        </div>
      }
    </nav>

    <!-- Bottom: User + Logout -->
    <div class="sidebar-footer">
      <div class="sidebar-user-card">
        <div class="sidebar-avatar" aria-hidden="true">{{ initials() }}</div>
        <div class="sidebar-user-info">
          <p class="sidebar-user-name">{{ displayName() }}</p>
          <p class="sidebar-user-role">{{ roleLabel() }}</p>
        </div>
      </div>
      <button
        type="button"
        class="sidebar-logout"
        (click)="logout()"
        aria-label="Cerrar sesión">
        <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
        <span>Salir</span>
      </button>
    </div>
  </div>
</aside>
