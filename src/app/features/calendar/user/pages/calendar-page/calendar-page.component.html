<div class="calendar-page">
  @if (isLoading) {
  <div class="loading-state">
    <div class="spinner"></div>
    <p>Cargando calendario...</p>
  </div>
  } @else if (error) {
  <div class="error-state">
    <i class="fas fa-exclamation-circle"></i>
    <p>{{ error }}</p>
    <button class="retry-btn" (click)="loadCalendarData()">Reintentar</button>
  </div>
  } @else {
  <app-calendar-view [viewMode]="viewMode" [currentDate]="currentDate" [events]="calendarEvents" [dayStates]="dayStates"
    [dayRanges]="dayRanges" [occupiedSlotsByDay]="occupiedSlotsByDay" [showNewAppointmentButton]="false"
    [showStats]="false" [showLegend]="false"
    (viewModeChange)="onViewModeChange($event)" (dateChange)="onDateChange($event)" (dayClick)="onDayClick($event)"
    (eventClick)="onEventClick($event)" (slotClick)="onSlotClick($event)">
  </app-calendar-view>
  }

  <!-- Modal de slots -->
  @if (isSlotsModalOpen && selectedDateForModal) {
  <app-slots-modal [isOpen]="isSlotsModalOpen" [selectedDate]="selectedDateForModal" (close)="onSlotsModalClose()"
    (appointmentCreated)="onAppointmentCreated()">
  </app-slots-modal>
  }
</div>